webpackJsonp([108],{1875:function(l,n,t){"use strict";function e(l){return r._57(0,[(l()(),r._31(0,0,null,null,9,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),r._55(-1,null,["\n                "])),(l()(),r._31(2,0,null,null,6,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),r._30(3,16384,null,0,T.a,[A.a,r.t,r.V],{color:[0,"color"]},null),(l()(),r._55(-1,null,["\n                    "])),(l()(),r._31(5,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),r._55(6,null,["",""])),r._49(7,2),(l()(),r._55(-1,null,["\n                "])),(l()(),r._55(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,r._56(n,6,0,l(n,7,0,r._44(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimedayshort")))})}function a(l){return r._57(0,[(l()(),r._31(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),r._55(-1,null,["\n                "])),(l()(),r._31(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),r._30(3,16384,null,0,T.a,[A.a,r.t,r.V],{color:[0,"color"]},null),(l()(),r._55(-1,null,["\n                    "])),(l()(),r._31(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),r._55(6,null,[""," ",""])),r._49(7,2),r._48(8,{$a:0}),r._47(131072,G.a,[J.a,r.j]),(l()(),r._55(-1,null,["\n                "])),(l()(),r._55(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,r._56(n,6,0,l(n,7,0,r._44(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),r._56(n,6,1,r._44(n,9).transform("addon.mod_chat.messageenter",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function u(l){return r._57(0,[(l()(),r._31(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),r._55(-1,null,["\n                "])),(l()(),r._31(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),r._30(3,16384,null,0,T.a,[A.a,r.t,r.V],{color:[0,"color"]},null),(l()(),r._55(-1,null,["\n                    "])),(l()(),r._31(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),r._55(6,null,[""," ",""])),r._49(7,2),r._48(8,{$a:0}),r._47(131072,G.a,[J.a,r.j]),(l()(),r._55(-1,null,["\n                "])),(l()(),r._55(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,r._56(n,6,0,l(n,7,0,r._44(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),r._56(n,6,1,r._44(n,9).transform("addon.mod_chat.messageexit",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function s(l){return r._57(0,[(l()(),r._31(0,0,null,null,23,"ion-item",[["class","addon-mod-chat-message item item-block"],["text-wrap",""]],null,null,null,K.b,K.a)),r._30(1,1097728,null,3,L.a,[N.a,A.a,r.t,r.V,[2,q.a]],null,null),r._52(335544320,1,{contentLabel:0}),r._52(603979776,2,{_buttons:1}),r._52(603979776,3,{_icons:1}),r._30(5,16384,null,0,z.a,[],null,null),(l()(),r._55(-1,2,["\n                "])),(l()(),r._31(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,B.b,B.a)),r._30(8,770048,null,0,H.a,[Q.a,W.a,X.a,Y.a,Z.a],{user:[0,"user"]},null),r._30(9,16384,null,0,ll.a,[],null,null),(l()(),r._55(-1,2,["\n                "])),(l()(),r._31(11,0,null,2,8,"h2",[],null,null,null,null,null)),(l()(),r._55(-1,null,["\n                    "])),(l()(),r._31(13,0,null,null,2,"p",[["float-end",""]],null,null,null,null,null)),(l()(),r._55(14,null,["",""])),r._49(15,2),(l()(),r._55(-1,null,["\n                    "])),(l()(),r._31(17,0,null,null,1,"core-format-text",[],null,null,null,null,null)),r._30(18,540672,null,0,nl.a,[r.t,W.a,h.a,tl.a,J.a,el.a,X.a,al.a,ul.a,sl.a,Y.a,ol.a,[2,Q.a],[2,il.a],[2,rl.a],_l.a,Z.a],{text:[0,"text"]},null),(l()(),r._55(-1,null,["\n                "])),(l()(),r._55(-1,2,["\n                "])),(l()(),r._31(21,0,null,2,1,"core-format-text",[],null,null,null,null,null)),r._30(22,540672,null,0,nl.a,[r.t,W.a,h.a,tl.a,J.a,el.a,X.a,al.a,ul.a,sl.a,Y.a,ol.a,[2,Q.a],[2,il.a],[2,rl.a],_l.a,Z.a],{text:[0,"text"]},null),(l()(),r._55(-1,2,["\n            "]))],function(l,n){l(n,8,0,n.parent.context.$implicit);l(n,18,0,n.parent.context.$implicit.userfullname);l(n,22,0,n.parent.context.$implicit.message)},function(l,n){l(n,14,0,r._56(n,14,0,l(n,15,0,r._44(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")))})}function o(l){return r._57(0,[(l()(),r._31(0,0,null,null,13,"div",[],null,null,null,null,null)),(l()(),r._55(-1,null,["\n            "])),(l()(),r._26(16777216,null,null,1,null,e)),r._30(3,16384,null,0,cl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n\n            "])),(l()(),r._26(16777216,null,null,1,null,a)),r._30(6,16384,null,0,cl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n\n            "])),(l()(),r._26(16777216,null,null,1,null,u)),r._30(9,16384,null,0,cl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n\n            "])),(l()(),r._26(16777216,null,null,1,null,s)),r._30(12,16384,null,0,cl.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n        "]))],function(l,n){var t=n.component;l(n,3,0,t.showDate(t.messages[n.context.index],t.messages[n.context.index-1]));l(n,6,0,n.context.$implicit.issystem&&"enter"==n.context.$implicit.message);l(n,9,0,n.context.$implicit.issystem&&"exit"==n.context.$implicit.message);l(n,12,0,!n.context.$implicit.issystem&&"beep"!=n.context.$implicit.message.substr(0,4))},null)}function i(l){return r._57(0,[r._47(0,dl.a,[ul.a,fl.a]),(l()(),r._31(1,0,null,null,12,"ion-header",[],null,null,null,null,null)),r._30(2,16384,null,0,ml.a,[A.a,r.t,r.V,[2,pl.a]],null,null),(l()(),r._55(-1,null,["\n    "])),(l()(),r._31(4,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,hl.b,hl.a)),r._30(5,49152,null,0,gl.a,[bl.a,[2,pl.a],[2,Q.a],A.a,r.t,r.V],null,null),r._30(6,212992,null,0,xl.a,[gl.a,el.a,J.a,Z.a],null,null),(l()(),r._55(-1,3,["\n        "])),(l()(),r._31(8,0,null,3,3,"ion-title",[],null,null,null,vl.b,vl.a)),r._30(9,49152,null,0,yl.a,[A.a,r.t,r.V,[2,Il.a],[2,gl.a]],null,null),(l()(),r._55(10,0,["",""])),r._47(131072,G.a,[J.a,r.j]),(l()(),r._55(-1,3,["\n    "])),(l()(),r._55(-1,null,["\n"])),(l()(),r._55(-1,null,["\n"])),(l()(),r._31(15,0,null,null,17,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,$l.b,$l.a)),r._30(16,4374528,null,0,il.a,[A.a,el.a,jl.a,r.t,r.V,bl.a,Ml.a,r.M,[2,pl.a],[2,Q.a]],null,null),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(18,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,n,t){var e=!0;if("ionRefresh"===n){e=!1!==l.component.refreshMessages(t)&&e}return e},null,null)),r._30(19,212992,null,0,Rl.a,[el.a,il.a,r.M,Pl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(l()(),r._55(-1,null,["\n        "])),(l()(),r._31(21,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ol.b,Ol.a)),r._30(22,114688,null,0,wl.a,[Rl.a,A.a],{pullingText:[0,"pullingText"]},null),r._47(131072,G.a,[J.a,r.j]),(l()(),r._55(-1,null,["\n    "])),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(26,0,null,1,5,"core-loading",[],null,null,null,Sl.b,Sl.a)),r._30(27,638976,null,0,Vl.a,[J.a,r.t,Z.a,X.a],{hideUntil:[0,"hideUntil"]},null),(l()(),r._55(-1,0,["\n        "])),(l()(),r._26(16777216,null,0,1,null,o)),r._30(30,802816,null,0,cl.j,[r._11,r._6,r.E],{ngForOf:[0,"ngForOf"]},null),(l()(),r._55(-1,0,["\n    "])),(l()(),r._55(-1,1,["\n"])),(l()(),r._55(-1,null,["\n"]))],function(l,n){var t=n.component;l(n,6,0);l(n,19,0,t.loaded);l(n,22,0,r._34(1,"",r._56(n,22,0,r._44(n,23).transform("core.pulltorefresh")),""));l(n,27,0,t.loaded);l(n,30,0,t.messages)},function(l,n){l(n,4,0,r._44(n,5)._hidden,r._44(n,5)._sbPadding);l(n,10,0,r._56(n,10,0,r._44(n,11).transform("addon.mod_chat.messages")));l(n,15,0,r._44(n,16).statusbarPadding,r._44(n,16)._hasRefresher);l(n,18,0,"inactive"!==r._44(n,19).state,r._44(n,19)._top);l(n,21,0,r._44(n,22).r.state)})}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),_=t(8),c=t(3),d=t(24),f=t(29),m=t(103),p=t(682),h=t(4),g=t(258),b=t(13),x=this&&this.__decorate||function(l,n,t,e){var a,u=arguments.length,s=u<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(s=(u<3?a(s):u>3?a(n,t,s):a(n,t))||s);return u>3&&s&&Object.defineProperty(n,t,s),s},v=this&&this.__metadata||function(l,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,n)},y=function(){function l(l,n,t){this.domUtils=n,this.chatProvider=t,this.loaded=!1,this.messages=[],this.courseId=l.get("courseId"),this.chatId=l.get("chatId"),this.groupId=l.get("groupId"),this.sessionStart=l.get("sessionStart"),this.sessionEnd=l.get("sessionEnd"),this.fetchMessages()}return l.prototype.fetchMessages=function(){var l=this;return this.chatProvider.getSessionMessages(this.chatId,this.sessionStart,this.sessionEnd,this.groupId).then(function(n){return l.chatProvider.getMessagesUserData(n,l.courseId).then(function(n){l.messages=n})}).catch(function(n){l.domUtils.showErrorModalDefault(n,"core.errorloadingcontent",!0)}).finally(function(){l.loaded=!0})},l.prototype.refreshMessages=function(l){var n=this;this.chatProvider.invalidateSessionMessages(this.chatId,this.sessionStart,this.groupId).finally(function(){n.fetchMessages().finally(function(){l.complete()})})},l.prototype.showDate=function(l,n){return!n||!b(1e3*l.timestamp).isSame(1e3*n.timestamp,"day")},l=x([Object(r.m)({selector:"page-addon-mod-chat-session-messages",templateUrl:"session-messages.html"}),v("design:paramtypes",[_.t,h.a,g.a])],l)}(),I=this&&this.__decorate||function(l,n,t,e){var a,u=arguments.length,s=u<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(s=(u<3?a(s):u>3?a(n,t,s):a(n,t))||s);return u>3&&s&&Object.defineProperty(n,t,s),s},$=function(){function l(){}return l=I([Object(r.I)({declarations:[y],imports:[d.a,f.a,m.a,p.a,_.l.forChild(y),c.b.forChild()]})],l)}(),j=t(1365),M=t(1366),R=t(1367),P=t(1368),O=t(1369),w=t(1370),S=t(1371),V=t(1372),k=t(1373),D=t(1376),U=t(1377),E=t(1378),C=t(1379),F=t(1398),T=t(147),A=t(6),G=t(27),J=t(18),K=t(30),L=t(20),N=t(19),q=t(28),z=t(33),B=t(208),H=t(180),Q=t(21),W=t(1),X=t(2),Y=t(9),Z=t(12),ll=t(179),nl=t(41),tl=t(10),el=t(14),al=t(26),ul=t(5),sl=t(16),ol=t(17),il=t(25),rl=t(34),_l=t(36),cl=t(7),dl=t(231),fl=t(23),ml=t(447),pl=t(37),hl=t(1374),gl=t(207),bl=t(32),xl=t(676),vl=t(1375),yl=t(350),Il=t(253),$l=t(178),jl=t(31),Ml=t(104),Rl=t(140),Pl=t(38),Ol=t(195),wl=t(146),Sl=t(49),Vl=t(48),kl=t(63),Dl=r._29({encapsulation:2,styles:[],data:{}}),Ul=r._27("page-addon-mod-chat-session-messages",y,function(l){return r._57(0,[(l()(),r._31(0,0,null,null,1,"page-addon-mod-chat-session-messages",[],null,null,null,i,Dl)),r._30(1,49152,null,0,y,[kl.a,h.a,g.a],null,null)],null,null)},{},{},[]),El=t(22),Cl=t(346),Fl=t(347),Tl=t(349),Al=t(348),Gl=t(446),Jl=t(675),Kl=t(67),Ll=t(254);t.d(n,"AddonModChatSessionMessagesPageModuleNgFactory",function(){return Nl});var Nl=r._28($,[],function(l){return r._40([r._41(512,r.o,r._21,[[8,[j.a,M.a,R.a,P.a,O.a,w.a,S.a,V.a,k.a,D.a,U.a,E.a,C.a,F.a,Ul]],[3,r.o],r.K]),r._41(4608,cl.m,cl.l,[r.G,[2,cl.v]]),r._41(4608,El.x,El.x,[]),r._41(4608,El.d,El.d,[]),r._41(4608,Cl.b,Cl.a,[]),r._41(4608,Fl.a,Fl.b,[]),r._41(4608,Tl.b,Tl.a,[]),r._41(4608,Al.b,Al.a,[]),r._41(4608,J.a,J.a,[Gl.a,Cl.b,Fl.a,Tl.b,Al.b,J.b,J.c]),r._41(512,cl.b,cl.b,[]),r._41(512,El.v,El.v,[]),r._41(512,El.i,El.i,[]),r._41(512,El.s,El.s,[]),r._41(512,Jl.a,Jl.a,[]),r._41(512,c.b,c.b,[]),r._41(512,f.a,f.a,[]),r._41(512,m.a,m.a,[]),r._41(512,d.a,d.a,[]),r._41(512,Kl.a,Kl.a,[]),r._41(512,p.a,p.a,[]),r._41(512,Jl.b,Jl.b,[]),r._41(512,$,$,[]),r._41(256,J.c,void 0,[]),r._41(256,J.b,void 0,[]),r._41(256,Ll.a,y,[])])})}});