webpackJsonp([58],{1946:function(n,l,e){"use strict";function s(n){return i._42(0,[(n()(),i._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var s=!0;if("click"===l){s=!1!==n.component.openSearch()&&s}return s},M.b,M.a)),i._15(1,1097728,[[2,4]],0,K.a,[[8,""],H.a,i.p,i.K],null,null),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,0,["\n                "])),(n()(),i._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i._15(5,147456,null,0,z.a,[H.a,i.p,i.K],{name:[0,"name"]},null),(n()(),i._40(-1,0,["\n            "]))],function(n,l){n(l,5,0,"search")},function(n,l){n(l,0,0,i._41(l,0,0,i._29(l,2).transform("core.courses.searchcourses")));n(l,4,0,i._29(l,5)._hidden)})}function o(n){return i._42(0,[(n()(),i._16(0,0,null,null,6,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(n,l,e){var s=!0,o=n.component;if("ngModelChange"===l){s=!1!==(o.filter=e)&&s}if("ionInput"===l){s=!1!==o.filterChanged(e)&&s}if("ionCancel"===l){s=!1!==o.filterChanged()&&s}return s},N.b,N.a)),i._15(1,671744,null,0,j.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),i._35(2048,null,j.m,null,[j.q]),i._15(3,16384,null,0,j.n,[j.m],null,null),i._15(4,1294336,[[1,4],["searchbar",4]],0,B.a,[H.a,V.a,i.p,i.K,[2,j.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,null,["\n        "]))],function(n,l){n(l,1,0,l.component.filter);n(l,4,0,i._41(l,4,0,i._29(l,5).transform("core.courses.filtermycourses")))},function(n,l){n(l,0,1,[i._29(l,3).ngClassUntouched,i._29(l,3).ngClassTouched,i._29(l,3).ngClassPristine,i._29(l,3).ngClassDirty,i._29(l,3).ngClassValid,i._29(l,3).ngClassInvalid,i._29(l,3).ngClassPending,i._29(l,4)._animated,i._29(l,4)._value,i._29(l,4)._isActive,i._29(l,4)._showCancelButton,i._29(l,4)._shouldAlignLeft,i._29(l,4)._isFocus])})}function u(n){return i._42(0,[(n()(),i._16(0,0,null,null,5,"ion-col",[["align-self-stretch",""],["class","col"],["col-12",""],["col-lg-4",""],["col-md-6",""],["col-sm-6",""],["col-xl-4",""],["no-padding",""]],null,null,null,null,null)),i._15(1,16384,null,0,q.a,[],null,null),(n()(),i._40(-1,null,["\n                    "])),(n()(),i._16(3,0,null,null,1,"core-courses-course-progress",[["class","core-courseoverview"],["showAll","true"]],null,null,null,G.b,G.a)),i._15(4,245760,null,0,J.a,[[2,Y.a],g.a,_.a,$.a,d.a,h.a,f.a,Q.a,X.a],{course:[0,"course"],showAll:[1,"showAll"]},null),(n()(),i._40(-1,null,["\n                "]))],function(n,l){n(l,4,0,l.context.$implicit,"true")},null)}function r(n){return i._42(0,[(n()(),i._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i._40(1,null,["",""])),i._32(131072,R.a,[W.a,i.i])],null,function(n,l){n(l,1,0,i._41(l,1,0,i._29(l,2).transform("core.courses.searchcoursesadvice")))})}function t(n){return i._42(0,[(n()(),i._16(0,0,null,null,6,"core-empty-box",[["icon","ionic"]],null,null,null,Z.b,Z.a)),i._15(1,49152,null,0,nn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,0,["\n            "])),(n()(),i._11(16777216,null,0,1,null,r)),i._15(5,16384,null,0,ln.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,0,["\n        "]))],function(n,l){var e=l.component;n(l,1,0,i._41(l,1,0,i._29(l,2).transform("core.courses.nocourses")),"ionic");n(l,5,0,e.searchEnabled)},null)}function a(n){return i._42(0,[i._37(671088640,1,{searchbar:0}),(n()(),i._16(1,0,null,null,32,"ion-header",[],null,null,null,null,null)),i._15(2,16384,null,0,en.a,[H.a,i.p,i.K,[2,sn.a]],null,null),(n()(),i._40(-1,null,["\n    "])),(n()(),i._16(4,0,null,null,28,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,on.b,on.a)),i._15(5,49152,null,0,un.a,[rn.a,[2,sn.a],[2,Y.a],H.a,i.p,i.K],null,null),i._15(6,212992,null,0,tn.a,[un.a,V.a,W.a,d.a],null,null),(n()(),i._40(-1,3,["\n        "])),(n()(),i._16(8,0,null,3,3,"ion-title",[],null,null,null,an.b,an.a)),i._15(9,49152,null,0,cn.a,[H.a,i.p,i.K,[2,dn.a],[2,un.a]],null,null),(n()(),i._40(10,0,["",""])),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,3,["\n\n        "])),(n()(),i._16(13,0,null,2,18,"ion-buttons",[["end",""]],null,null,null,null,null)),i._15(14,16384,null,1,hn.a,[H.a,i.p,i.K,[2,dn.a],[2,un.a]],null,null),i._37(603979776,2,{_buttons:1}),(n()(),i._40(-1,null,["\n            "])),(n()(),i._11(16777216,null,null,1,null,s)),i._15(18,16384,null,0,ln.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,null,["\n            "])),(n()(),i._16(20,0,null,null,10,"core-context-menu",[],null,null,null,_n.b,_n.a)),i._15(21,245760,null,0,fn.a,[W.a,Q.a,i.p,_.a,[2,pn.a],gn.a],null,null),(n()(),i._40(-1,0,["\n                "])),(n()(),i._16(23,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var s=!0;if("action"===l){s=!1!==n.component.prefetchCourses()&&s}return s},Cn.b,Cn.a)),i._15(24,770048,null,0,bn.a,[fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],badge:[4,"badge"],hidden:[5,"hidden"]},{action:"action"}),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,0,["\n                "])),(n()(),i._16(27,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var s=!0;if("action"===l){s=!1!==n.component.switchFilter()&&s}return s},Cn.b,Cn.a)),i._15(28,770048,null,0,bn.a,[fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,0,["\n            "])),(n()(),i._40(-1,null,["\n        "])),(n()(),i._40(-1,3,["\n    "])),(n()(),i._40(-1,null,["\n"])),(n()(),i._40(-1,null,["\n"])),(n()(),i._16(35,0,null,null,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,vn.b,vn.a)),i._15(36,4374528,null,0,mn.a,[H.a,V.a,yn.a,i.p,i.K,rn.a,In.a,i.D,[2,sn.a],[2,Y.a]],null,null),(n()(),i._40(-1,1,["\n    "])),(n()(),i._16(38,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var s=!0;if("ionRefresh"===l){s=!1!==n.component.refreshCourses(e)&&s}return s},null,null)),i._15(39,212992,null,0,Dn.a,[V.a,mn.a,i.D,wn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),i._40(-1,null,["\n        "])),(n()(),i._16(41,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Pn.b,Pn.a)),i._15(42,114688,null,0,An.a,[Dn.a,H.a],{pullingText:[0,"pullingText"]},null),i._32(131072,R.a,[W.a,i.i]),(n()(),i._40(-1,null,["\n    "])),(n()(),i._40(-1,1,["\n\n    "])),(n()(),i._16(46,0,null,1,19,"core-loading",[],null,null,null,On.b,On.a)),i._15(47,638976,null,0,En.a,[W.a,i.p,d.a,gn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),i._40(-1,0,["\n        "])),(n()(),i._11(16777216,null,0,1,null,o)),i._15(50,16384,null,0,ln.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,0,["\n        "])),(n()(),i._16(52,0,null,0,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),i._15(53,16384,null,0,Sn.a,[],null,null),(n()(),i._40(-1,null,["\n            "])),(n()(),i._16(55,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),i._15(56,16384,null,0,xn.a,[],null,null),(n()(),i._40(-1,null,["\n                "])),(n()(),i._11(16777216,null,null,1,null,u)),i._15(59,802816,null,0,ln.j,[i.W,i.T,i.v],{ngForOf:[0,"ngForOf"]},null),(n()(),i._40(-1,null,["\n            "])),(n()(),i._40(-1,null,["\n        "])),(n()(),i._40(-1,0,["\n        "])),(n()(),i._11(16777216,null,0,1,null,t)),i._15(64,16384,null,0,ln.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,0,["\n    "])),(n()(),i._40(-1,1,["\n"])),(n()(),i._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,6,0);n(l,18,0,e.searchEnabled),n(l,21,0);n(l,24,0,i._41(l,24,0,i._29(l,25).transform("core.courses.downloadcourses")),e.prefetchCoursesData.icon,!1,800,e.prefetchCoursesData.badge,!e.downloadAllCoursesEnabled||!e.courses||e.courses.length<2);n(l,28,0,i._41(l,28,0,i._29(l,29).transform("core.courses.filtermycourses")),"funnel",700,!e.courses||e.courses.length<=5);n(l,39,0,e.coursesLoaded);n(l,42,0,i._19(1,"",i._41(l,42,0,i._29(l,43).transform("core.pulltorefresh")),""));n(l,47,0,e.coursesLoaded);n(l,50,0,e.showFilter);n(l,59,0,e.filteredCourses);n(l,64,0,!e.courses||!e.courses.length)},function(n,l){n(l,4,0,i._29(l,5)._hidden,i._29(l,5)._sbPadding);n(l,10,0,i._41(l,10,0,i._29(l,11).transform("core.courses.mycourses")));n(l,35,0,i._29(l,36).statusbarPadding,i._29(l,36)._hasRefresher);n(l,38,0,"inactive"!==i._29(l,39).state,i._29(l,39)._top);n(l,41,0,i._29(l,42).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var i=e(1),c=(e(0),e(9),e(4)),d=e(13),h=e(2),_=e(5),f=e(51),p=e(189),g=e(41),C=e(107),b=function(){function n(n,l,e,s,o,u,r,t){this.navCtrl=n,this.coursesProvider=l,this.domUtils=e,this.eventsProvider=s,this.sitesProvider=o,this.courseHelper=u,this.courseOptionsDelegate=r,this.coursesHelper=t,this.filter="",this.showFilter=!1,this.coursesLoaded=!1,this.prefetchCoursesData={},this.prefetchIconInitialized=!1,this.isDestroyed=!1,this.courseIds=""}return n.prototype.ionViewDidLoad=function(){var n=this;this.searchEnabled=!this.coursesProvider.isSearchCoursesDisabledInSite(),this.downloadAllCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.fetchCourses().finally(function(){n.coursesLoaded=!0}),this.myCoursesObserver=this.eventsProvider.on(f.a.EVENT_MY_COURSES_UPDATED,function(){n.fetchCourses()},this.sitesProvider.getCurrentSiteId()),this.siteUpdatedObserver=this.eventsProvider.on(d.a.SITE_UPDATED,function(){var l=n.downloadAllCoursesEnabled;n.searchEnabled=!n.coursesProvider.isSearchCoursesDisabledInSite(),n.downloadAllCoursesEnabled=!n.coursesProvider.isDownloadCoursesDisabledInSite(),!l&&n.downloadAllCoursesEnabled&&n.coursesLoaded&&n.initPrefetchCoursesIcon()},this.sitesProvider.getCurrentSiteId())},n.prototype.fetchCourses=function(){var n=this;return this.coursesProvider.getUserCourses().then(function(l){var e=[],s=l.map(function(n){return n.id});return n.courseIds=s.join(","),e.push(n.coursesHelper.loadCoursesExtraInfo(l)),n.coursesProvider.canGetAdminAndNavOptions()&&e.push(n.coursesProvider.getCoursesAdminAndNavOptions(s).then(function(n){l.forEach(function(l){l.navOptions=n.navOptions[l.id],l.admOptions=n.admOptions[l.id]})})),Promise.all(e).then(function(){n.courses=l,n.filteredCourses=n.courses,n.filter="",n.initPrefetchCoursesIcon()})}).catch(function(l){n.domUtils.showErrorModalDefault(l,"core.courses.errorloadcourses",!0)})},n.prototype.refreshCourses=function(n){var l=this,e=[];e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds&&e.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds)),Promise.all(e).finally(function(){l.prefetchIconInitialized=!1,l.fetchCourses().finally(function(){n.complete()})})},n.prototype.switchFilter=function(){var n=this;this.filter="",this.showFilter=!this.showFilter,this.filteredCourses=this.courses,this.showFilter&&setTimeout(function(){n.searchbar.setFocus()},500)},n.prototype.openSearch=function(){this.navCtrl.push("CoreCoursesSearchPage")},n.prototype.filterChanged=function(n){var l=n.target.value&&n.target.value.trim().toLowerCase();this.filteredCourses=l&&this.courses?this.courses.filter(this.courses.length>0&&void 0!==this.courses[0].displayname?function(n){return n.displayname.toLowerCase().indexOf(l)>-1}:function(n){return n.fullname.toLowerCase().indexOf(l)>-1}):this.courses},n.prototype.prefetchCourses=function(){var n=this,l=this.prefetchCoursesData.icon;return this.prefetchCoursesData.icon="spinner",this.prefetchCoursesData.badge="",this.courseHelper.confirmAndPrefetchCourses(this.courses,function(l){n.prefetchCoursesData.badge=l.count+" / "+l.total}).then(function(){n.prefetchCoursesData.icon="ion-android-refresh"}).catch(function(e){n.isDestroyed||(n.domUtils.showErrorModalDefault(e,"core.course.errordownloadingcourse",!0),n.prefetchCoursesData.icon=l)}).finally(function(){n.prefetchCoursesData.badge=""})},n.prototype.initPrefetchCoursesIcon=function(){var n=this;!this.prefetchIconInitialized&&this.downloadAllCoursesEnabled&&(this.prefetchIconInitialized=!0,!this.courses||this.courses.length<2?this.prefetchCoursesData.icon="":this.courseHelper.determineCoursesStatus(this.courses).then(function(l){var e=n.courseHelper.getCourseStatusIconAndTitleFromStatus(l).icon;"spinner"==e&&(e="cloud-download"),n.prefetchCoursesData.icon=e}))},n.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.myCoursesObserver&&this.myCoursesObserver.off(),this.siteUpdatedObserver&&this.siteUpdatedObserver.off()},n}(),v=e(25),m=e(30),y=e(256),I=function(){return function(){}}(),D=e(1365),w=e(1366),P=e(1367),A=e(1368),O=e(1369),E=e(1370),S=e(1371),x=e(1372),F=e(1373),T=e(1376),U=e(1377),k=e(1378),L=e(1393),M=e(47),K=e(44),H=e(7),R=e(28),W=e(19),z=e(46),N=e(1439),j=e(23),B=e(367),V=e(15),q=e(114),G=e(380),J=e(270),Y=e(22),$=e(16),Q=e(66),X=e(43),Z=e(117),nn=e(106),ln=e(8),en=e(447),sn=e(38),on=e(1374),un=e(207),rn=e(33),tn=e(676),an=e(1375),cn=e(350),dn=e(253),hn=e(448),_n=e(82),fn=e(71),pn=e(70),gn=e(3),Cn=e(83),bn=e(75),vn=e(178),mn=e(26),yn=e(32),In=e(105),Dn=e(141),wn=e(39),Pn=e(195),An=e(147),On=e(50),En=e(49),Sn=e(143),xn=e(115),Fn=i._14({encapsulation:2,styles:[],data:{}}),Tn=i._12("page-core-courses-my-courses",b,function(n){return i._42(0,[(n()(),i._16(0,0,null,null,1,"page-core-courses-my-courses",[],null,null,null,a,Fn)),i._15(1,180224,null,0,b,[Y.a,f.a,_.a,d.a,h.a,g.a,C.a,p.a],null,null)],null,null)},{},{},[]),Un=e(346),kn=e(347),Ln=e(349),Mn=e(348),Kn=e(446),Hn=e(675),Rn=e(104),Wn=e(254);e.d(l,"CoreCoursesMyCoursesPageModuleNgFactory",function(){return zn});var zn=i._13(I,[],function(n){return i._25([i._26(512,i.n,i._6,[[8,[D.a,w.a,P.a,A.a,O.a,E.a,S.a,x.a,F.a,T.a,U.a,k.a,L.a,Tn]],[3,i.n],i.B]),i._26(4608,ln.m,ln.l,[i.x,[2,ln.v]]),i._26(4608,j.x,j.x,[]),i._26(4608,j.d,j.d,[]),i._26(4608,Un.b,Un.a,[]),i._26(4608,kn.a,kn.b,[]),i._26(4608,Ln.b,Ln.a,[]),i._26(4608,Mn.b,Mn.a,[]),i._26(4608,W.a,W.a,[Kn.a,Un.b,kn.a,Ln.b,Mn.b,W.b,W.c]),i._26(512,ln.b,ln.b,[]),i._26(512,j.v,j.v,[]),i._26(512,j.i,j.i,[]),i._26(512,j.s,j.s,[]),i._26(512,Hn.a,Hn.a,[]),i._26(512,c.a,c.a,[]),i._26(512,m.a,m.a,[]),i._26(512,Rn.a,Rn.a,[]),i._26(512,v.a,v.a,[]),i._26(512,y.a,y.a,[]),i._26(512,Hn.b,Hn.b,[]),i._26(512,I,I,[]),i._26(256,W.c,void 0,[]),i._26(256,W.b,void 0,[]),i._26(256,Wn.a,b,[])])})}});